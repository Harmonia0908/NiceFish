<div class="role-edit-container" [@fadeIn]>
    <div class="panel panel-default">
        <div class="panel-heading">
            <h3 class="panel-title">创建/编辑前端组件权限</h3>
        </div>
        <div class="panel-body">
            <form class="form-horizontal" role="form" #roleInfoForm="ngForm" novalidate>
                <div class="form-group" *ngIf="(compPermId=='-1')&&(!componentPermission.parentEntity)">
                    <label class="col-md-2 control-label">父层组件：</label>
                    <div class="col-md-10">
                        <span class="label label-danger form-control">无</span>
                    </div>
                </div>
                <div class="form-group" *ngIf="componentPermission.parentEntity">
                    <label class="col-md-2 control-label">父层组件：</label>
                    <div class="col-md-10">
                        <span
                            class="label label-danger form-control">{{componentPermission.parentEntity.componentName}}</span>
                    </div>
                </div>
                <div class=" form-group" [ngClass]="{ 'has-error': !componentName.valid }">
                    <label class="col-md-2 control-label">组件名称：</label>
                    <div class="col-md-10">
                        <input name="componentName" [(ngModel)]="componentPermission.componentName"
                            #componentName="ngModel" type="text" class="form-control" placeholder="请输入组件名称" required
                            minlength="2" maxlength="32" />
                    </div>
                </div>
                <div class="form-group" [ngClass]="{ 'has-error': !icon.valid }">
                    <label class="col-md-2 control-label">组件图标：</label>
                    <div class="col-md-10">
                        <input name="icon" [(ngModel)]="componentPermission.icon" #icon="ngModel" type="text"
                            class="form-control" placeholder="请输入图标 URL" />
                    </div>
                </div>
                <div class="form-group" [ngClass]="{ 'has-error': !url.valid }">
                    <label class="col-md-2 control-label">组件 URL：</label>
                    <div class="col-md-10">
                        <input name="url" [(ngModel)]="componentPermission.url" #url="ngModel" type="text"
                            class="form-control" placeholder="请输入 URL" maxlength="32" />
                    </div>
                </div>
                <div class="form-group" [ngClass]="{ 'has-error': !displayOrder.valid }">
                    <label class="col-md-2 control-label">显示顺序：</label>
                    <div class="col-md-10">
                        <input name="displayOrder" [(ngModel)]="componentPermission.displayOrder"
                            #displayOrder="ngModel" type="number" class="form-control" placeholder="请输入显示顺序" required
                            minlength="1" maxlength="32" />
                    </div>
                </div>
                <div class="form-group" [ngClass]="{ 'has-error': !permission.valid }">
                    <label class="col-md-2 control-label">权限通配符：</label>
                    <div class="col-md-10">
                        <input name="permission" [(ngModel)]="componentPermission.permission" #permission="ngModel"
                            type="text" class="form-control" placeholder="请输入权限通配符" required="" minlength="1"
                            maxlength="32" />
                        <p class="bg-danger">
                            Apache Shiro 通配符权限文档： https://shiro.apache.org/permissions.html
                        </p>
                    </div>
                </div>
                <div class="form-group" [ngClass]="{ 'has-error': !compVisiable.valid }">
                    <label class="col-md-2 control-label">是否启用：</label>
                    <div class="col-md-10">
                        <div class="checkbox">
                            <label>
                                <input name="compVisiable" [(ngModel)]="componentPermission.compVisiable"
                                    #compVisiable="ngModel" type="checkbox" required />
                            </label>
                        </div>
                    </div>
                </div>
                <!-- 编辑的时候显示，新建的时候不显示 -->
                <div class="form-group" *ngIf="compPermId!=='-1'">
                    <label class="col-md-2 control-label">创建时间：</label>
                    <div class="col-md-10">
                        {{componentPermission.createTime | date: 'yyyy-MM-dd HH:mm:ss'}}
                    </div>
                </div>
                <!-- 编辑的时候显示，新建的时候不显示 -->
                <div class="form-group" *ngIf="compPermId!=='-1'">
                    <label class="col-md-2 control-label">更新时间：</label>
                    <div class="col-md-10">
                        {{componentPermission.updateTime | date: 'yyyy-MM-dd HH:mm:ss'}}
                    </div>
                </div>
                <div class="form-group" [ngClass]="{ 'has-error': !remark.valid }">
                    <label class="col-md-2 control-label">备注：</label>
                    <div class="col-md-10">
                        <textarea rows="5" name="remark" [(ngModel)]="componentPermission.remark" #remark="ngModel"
                            type="text" class="form-control" placeholder="备注" maxlength="200">
                        </textarea>
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-md-offset-2 col-md-10">
                        <button type="submit" class="btn btn-primary btn-margin-1rem" (click)="save()">
                            保存
                        </button>
                        <button type="button" class="btn btn-default" (click)="cancel()">
                            取消
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>